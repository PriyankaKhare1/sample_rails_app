<% provide(:title, "Admin Analytics") %>
<h1>Admin Analytics</h1>

<div class="row">
  <div class="col-md-6">
    <h3>Top Users by Microposts</h3>
    <table class="table table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>User</th>
          <th>Microposts</th>
        </tr>
      </thead>
      <tbody>
        <% @top_users.each_with_index do |user, index| %>
          <tr>
            <td><%= index + 1 %></td>
            <td>
              <%= gravatar_for user, size: 30 %>
              <%= link_to user.name, user %>
            </td>
            <td><%= user.microposts_count %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div class="col-md-6">
    <h3>Recent Microposts</h3>
    <ol class="microposts">
      <% @recent_posts.each do |post| %>
        <li>
          <%= gravatar_for post.user, size: 30 %>
          <span class="content">
            <strong><%= link_to post.user.name, post.user %></strong>
            <%= truncate(post.content, length: 100) %>
            <span class="timestamp">
              Posted <%= time_ago_in_words(post.created_at) %> ago
            </span>
          </span>
        </li>
      <% end %>
    </ol>
  </div>
</div>
